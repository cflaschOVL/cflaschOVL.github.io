(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{3257:function(e,t,n){"use strict";n.d(t,{S$:function(){return F},Gb:function(){return E},J0:function(){return O}});var a=n(2322),i=n(7473),r=n(8630),_=n(2779),l=n.n(_),o=n(2784),s=n(8601);let c=e=>Object.entries(e).reduce((e,t)=>{let[n,a]=t;return"string"!=typeof a||a.length?{...e,[n]:a}:{...e}},{}),m=e=>e.replace(/(a\u0308)/g,"ae").replace(/(A\u0308)/g,"AE").replace(/(o\u0308)/g,"oe").replace(/(O\u0308)/g,"OE").replace(/(u\u0308)/g,"ue").replace(/(U\u0308)/g,"UE").replace(/\s/g,"-").replace(/[^a-zA-Z0-9_\-\(\)\.]/g,"");n(4406);let d=async e=>{let{url:t,method:n,token:a,body:i,headers:r}=e,_=await fetch(t,{method:n,headers:{...r,Accept:"application/json",...(null==a?void 0:a.length)?{Authorization:"Bearer ".concat(a)}:{}},...i?{body:JSON.stringify(i)}:{}});if(!_.ok){let e=Error("An HTTP fetch error occurred");throw e.info=_.body?await _.json():{},e.statusCode=_.status,e}return{headers:Object.fromEntries(_.headers.entries()),body:_.body?await _.json():{}}},p=async e=>{let{url:t,method:n,token:a,body:i,headers:r}=e,_="",l=await fetch(t,{method:n,headers:{...r,Accept:"application/json",...(null==a?void 0:a.length)?{Authorization:"Bearer ".concat(a)}:{}},...i?{body:JSON.stringify(i)}:{}}).then(e=>{if(!e.redirected)return e;_=e.url});if(!_){let e=Error("An HTTP fetch error occurred");throw e.info=(null==l?void 0:l.body)?await l.json():{},e.statusCode=null==l?void 0:l.status,e}return{body:{redirect:_}}},u=async(e,t,n)=>d({url:e,body:t,token:n,method:"POST",headers:{"Content-Type":"application/json"}}),h=async(e,t,n)=>p({url:e,token:t,method:"GET",headers:n}),g=async e=>{let{url:t,file:n}=e,a=null,i=await fetch(t,{method:"PUT",headers:{"Content-Type":n.type},body:n});return i.ok||((a=Error("S3 upload failed")).statusCode=i.status),{file:n,error:a}},x=async e=>{let{data:t}=e,n=await u("".concat("https://api-qa.ama.ovl.cloud","/contact-service/add-attachments"),c(t));return n.body},b=async e=>{let{data:t}=e,n=await u("".concat("https://api-qa.ama.ovl.cloud","/contact-service/report-form"),c(t));return n.body};var f=n(6812),j=n(2876),v=n(3955);let T=async e=>{let{id:t,secret:n}=e,a="".concat("https://api-qa.ama.ovl.cloud","/contact-service/attachments/").concat(t,"?secret=").concat(encodeURIComponent(n)),i=await h(a);return i.body};var y=n(7298),w=n.n(y);function F(){let[e,t]=(0,o.useState)(!1),[n,i]=(0,o.useState)(!1),_=(0,j.useSearchParams)(),c=_.get("aId")||"",m=s.Ry().shape({password:s.Z_().required("Bitte geben Sie das Passwort ein!")}),d=(0,o.useMemo)(()=>({password:""}),[]),p=(0,v.cI)({resolver:(0,f.X)(m),defaultValues:d}),{handleSubmit:u}=p,h=async e=>{t(!0);try{let t=await T({id:c,secret:e.password});i(!1),window.open(null==t?void 0:t.redirect,"_self")}catch(e){console.error(e),i(!0)}finally{t(!1)}};return(0,a.jsx)("div",{className:w().mailAttachments,children:(0,a.jsxs)("div",{className:w().mailAttachments__container,children:[(0,a.jsx)("span",{className:l()("header-title"),children:"HALTUNG.AT"}),(0,a.jsxs)(r.RV,{methods:p,onSubmit:u(h),className:l()(w().mailAttachments__form),children:[(0,a.jsx)("div",{className:w().contactForm__upper,children:(0,a.jsx)("div",{className:w().contactForm__upper__inner,children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"o-label-wrapper",children:[(0,a.jsx)("label",{className:"u-form-input-label",children:"Bitte geben Sie das Passwort ein!"}),(0,a.jsx)(r.au,{name:"password",label:"Passwort",type:"password"})]})})})}),n&&(0,a.jsx)("p",{children:"Leider konnte Ihre Anfrage nicht \xfcbermittelt werden, versuchen Sie es bitte zu einem sp\xe4teren Zeitpunkt erneut"}),(0,a.jsx)("div",{className:w().mailAttachments__form__submit,children:(0,a.jsxs)(r.Vc,{buttonType:"submit",type:"primary",variant:"button",children:["Anfrage senden",e&&(0,a.jsx)(r.$j,{className:w().contactForm__submit__spinner})]})})]})]})})}var N=n(8753),I=n(8245),A=n(5969),k=n.n(A),P=n(6577),S=n.n(P);function R(e){var t;let{timeline:n}=e;return(0,a.jsxs)("div",{className:l()(k().paginatedTimelineItem),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:k().paginatedTimelineItem__content__item__imageWrapper,children:(0,a.jsx)("figure",{children:(0,a.jsx)("div",{className:k().paginatedTimelineItem__content__item__image,children:(0,a.jsx)(S(),{src:n.image.imageData,alt:n.image.alt,draggable:!1,placeholder:(null===(t=n.image.imageData)||void 0===t?void 0:t.blurDataURL)?"blur":"empty",fill:!0,style:{objectFit:"cover"}})})})}),(0,a.jsxs)("div",{className:k().paginatedTimelineItem__content__currentLine,children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:l()(k().paginatedTimelineItem__content__item__title,k().paginatedTimelineItem__content__item__headline,"h3"),children:n.title}),"string"==typeof n.content?(0,a.jsx)("p",{className:k().paginatedTimelineItem__content__item__text,children:n.content}):(0,a.jsx)("div",{className:k().paginatedTimelineItem__content__item__text,children:n.content})]})]})}function E(e){let{children:t,timelines:n}=e,[i,r]=(0,o.useState)(n[0].id);return(0,a.jsx)("div",{className:l()(k().paginatedTimeline,"o-content-xlarge","u-p-p-mobile"),children:(0,a.jsx)("div",{className:k().paginatedTimeline__content,children:(0,a.jsx)("div",{className:k().paginatedTimeline__content__wrapper,children:n.map((e,t)=>(0,a.jsx)(o.Fragment,{children:(0,a.jsx)(I.h,{onEnter:()=>{r(e.id)},topOffset:"20%",bottomOffset:"70%",children:(0,a.jsxs)("div",{id:e.id,className:l()(k().paginatedTimeline__content__item,{[k()["-active"]]:i===e.id}),children:[(0,a.jsxs)("div",{className:k().paginatedTimeline__content__line,children:[(0,a.jsxs)("h2",{className:l()(k().paginatedTimeline__content__item__title),children:[(0,a.jsx)("span",{children:e.year.slice(0,2)}),(0,a.jsx)("span",{children:e.year.slice(2)})]}),n.length===t+1&&(0,a.jsx)("div",{className:k().paginatedTimeline__content__triangle})]}),(0,a.jsx)("div",{className:k().paginatedTimeline__content__item__content,children:(0,a.jsx)(N.n,{animateIn:"animate__fadeIn",duration:.75,animateOnce:!0,children:(0,a.jsx)(R,{timeline:e})})})]})},t)},t))})})})}var B=n(481),M=n.n(B);function U(){var e;let[t,n]=(0,o.useState)(!1),[_,c]=(0,o.useState)(!1),[d,p]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[j,T]=(0,o.useState)(!1),y=(0,o.useRef)(null),{executeRecaptcha:w}=(0,i.xX)(),F=s.Ry().shape({message:s.Z_().required("Bitte geben Sie eine Nachricht ein!"),dataProtectionPolicyAccepted:s.O7().oneOf([!0],"Du musst der Datenschutzerkl\xe4rung zustimmen."),multiUpload:s.IX(),enquiriesAvailable:s.O7(),email:s.Z_().when("enquiriesAvailable",{is:e=>!!e,then:()=>s.Z_().email("Ung\xfcltiges E-Mail Format").required("Bitte geben Sie Ihre E-mail ein!")}),maps:s.Ry().shape({latitude:s.Z_(),longitude:s.Z_(),address:s.Z_().required("Bitte geben Sie eine Addresse ein!")})}),N=(0,o.useMemo)(()=>({message:"",email:"",dataProtectionPolicyAccepted:!1,enquiriesAvailable:!1,multiUpload:[]}),[]),I=(0,v.cI)({resolver:(0,f.X)(F),defaultValues:N}),{handleSubmit:A,setValue:k,watch:P,getValues:S}=I,R=P(),E=null===(e=S("multiUpload"))||void 0===e?void 0:e[0],B=async e=>{n(!0);try{var t;let n;if(null===(t=e.multiUpload)||void 0===t?void 0:t.length){let t=await (null==w?void 0:w());if(!(n=await U(e.multiUpload,t)))return}let a="\n            ".concat(e.message,"\n            <br/><br/>\n            <p><strong>Standort:</strong></p>").concat(O(e.maps.latitude,e.maps.longitude),"\n            ").concat(n?"<br/>\n            <p><strong>Anh\xe4nge:</strong></p>".concat(C(n)):"","\n            "),i=await (null==w?void 0:w());z({email:e.email,dataProtectionPolicyAccepted:e.dataProtectionPolicyAccepted,message:a,captchaToken:i})}catch(e){n(!1),c(!0)}},U=async(e,t)=>{let a;let i=Object.values(e[0])||[];try{let e=await x({data:{attachments:i.map(e=>({filename:e.name})),captchaToken:t}});await Promise.all(e.map(e=>{let t=i.find(t=>m(t.name)===m(e.attachment.filename));return g({url:e.s3Url,file:t})})),a=e}catch(e){n(!1),c(!0)}return a},O=(e,t)=>{let n="https://www.google.com/maps/place/".concat(e,",").concat(t);return'<p><a href="'.concat(n,'" target="_blank">').concat(n,"</a></p>")},C=e=>{let t="".concat("http://localhost:4200","/mail-attachments"),n="<ul>";return e.forEach(e=>{n+='<li><a href="'.concat(t,"?aId=").concat(e.attachment.id,'" target="_blank">').concat(t,"?aId=").concat(e.attachment.id,"</a></li>")}),n+="</ul>"},z=async e=>{try{await b({data:e}),q(),n(!1),c(!1),p(!0)}catch(e){n(!1),c(!0)}},q=()=>{(null==y?void 0:y.current)&&window.scrollTo({top:(null==y?void 0:y.current.offsetTop)-80,behavior:"smooth"})};return(0,o.useEffect)(()=>{j&&T(!1)},[j]),(0,a.jsx)("div",{className:M().reportForm,ref:y,children:(0,a.jsxs)("div",{className:"o-content-xlg",style:{paddingTop:"48px",paddingBottom:"48px"},children:[(0,a.jsx)("h1",{style:{marginBottom:"24px"},children:"SIE WOLLEN UNS ETWAS MELDEN? WIR WERDEN UNS DARUM K\xdcMMERN."}),(0,a.jsxs)("p",{style:{marginBottom:"24px"},children:["Sie haben in einem Betrieb, der f\xfcr das AMA-G\xfctesiegelprogramm produziert, ein Fehlverhalten erkannt? Dann haben Sie hier die M\xf6glichkeit, uns vertraulich \xfcber dieses Fehlverhalten zu informieren. Wir behandeln Ihre Meldung vertraulich und pr\xfcfen die Fakten.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Sofern Sie dies w\xfcnschen, melden wir uns bei Ihnen zur\xfcck.*"]}),(0,a.jsxs)(r.RV,{methods:I,onSubmit:A(B),className:l()(M().reportForm__form,{[M()["-successfull"]]:d}),children:[(0,a.jsx)("div",{className:M().reportForm__upper,children:(0,a.jsxs)("div",{className:M().reportForm__upper__inner,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"o-label-wrapper",children:[(0,a.jsx)("label",{className:"u-form-input-label",children:"Ihr vertraulicher Hinweis"}),(0,a.jsx)(r.r,{name:"message",label:"Ihre Nachricht"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:l()(M().reportForm__upper__inner__left,"o-label-wrapper"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"u-form-input-label",children:"Bilder oder Videos hochladen"}),(0,a.jsx)(r.rd,{reset:j,name:"multiUpload",onChange:e=>{k("multiUpload",[e.target.files],{shouldValidate:!0})},onRemove:()=>{k("multiUpload",[],{shouldValidate:!0})},accept:"image/*, video/*"}),!!E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:l()(M().reportForm__upload__list),children:Object.values(E).map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"u-body",children:e.name}),(0,a.jsx)("div",{className:"u-body-s",children:function(e){if(0===e)return"0 Byte";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB","TB"][t]}(e.size)})]},t))}),(0,a.jsx)("button",{className:l()("o-link o-link-secondary u-color-primary",M().reportForm__upload__remove),type:"button",onClick:()=>{k("multiUpload",[],{shouldValidate:!0}),T(!0)},children:"Alle entfernen"})]})]}),(0,a.jsxs)("div",{className:l()(M().reportForm__upper__inner__emailWrapper),children:[(0,a.jsx)("label",{className:"u-form-input-label",children:(0,a.jsx)(r.jb,{name:"enquiriesAvailable",label:(0,a.jsx)(a.Fragment,{children:"Ich stehe f\xfcr R\xfcckfragen zur Verf\xfcgung."})})}),!0===R.enquiriesAvailable&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"u-form-input-label",children:"E-Mail Adresse*"}),(0,a.jsx)(r.au,{name:"email",label:"max@mustermann.at"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"u-form-input-label",children:(0,a.jsx)(r.jb,{name:"dataProtectionPolicyAccepted",label:(0,a.jsxs)(a.Fragment,{children:["Ich bin mit der"," ",(0,a.jsx)(r.Vc,{href:"/datenschutz",variant:"link",className:"u-color-primary",type:"secondary",target:"_blank",children:"Datenschutzerkl\xe4rung"})," ","einverstanden.*"]})})}),(0,a.jsxs)("div",{className:M().reportForm__submit__wrapper,children:[(0,a.jsx)(r.Vc,{buttonType:"submit",variant:"button",onClick:()=>{h(!u)},children:"Anfrage senden"}),t&&(0,a.jsx)(r.$j,{className:M().reportForm__submit__spinner})]})]})]}),(0,a.jsx)("div",{className:"o-label-wrapper",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"u-form-input-label",children:"Wo haben Sie diesen Vorfall beobachtet?"}),(0,a.jsx)(r.GN,{name:"maps",label:"Standort eingeben"})]})})]})]})}),(0,a.jsx)("div",{className:M().reportForm__down}),_&&(0,a.jsxs)("div",{className:M().reportForm__error,children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:"Leider konnte Ihre Anfrage nicht \xfcbermittelt werden, versuchen Sie es bitte zu einem sp\xe4teren Zeitpunkt erneut"})}),(0,a.jsxs)("button",{type:"button",className:M().reportForm__error__close,onClick:()=>c(!1),children:[(0,a.jsx)("span",{className:M().reportForm__error__close__top}),(0,a.jsx)("span",{className:M().reportForm__error__close__bottom})]})]})]}),(0,a.jsxs)("div",{className:l()(M().reportForm__thankyou,{[M()["-thankyou"]]:d}),children:[(0,a.jsx)("h3",{children:"Vielen Dank f\xfcr Ihre Anfrage, wir k\xfcmmern uns umgehend um die Beantwortung!"}),d&&(0,a.jsxs)("svg",{className:"o-animated-checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",children:[(0,a.jsx)("circle",{className:"o-animated-checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),(0,a.jsx)("path",{className:"o-animated-checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})]})]})})}function O(){return(0,a.jsx)("div",{children:(0,a.jsx)(i.pm,{reCaptchaKey:"6LdCT4giAAAAANvtBCu4DmEfbvaUMqhqwZqMCBI2",language:"de",children:(0,a.jsx)(U,{})})})}},7298:function(e){e.exports={mailAttachments:"MailAttachments_mailAttachments__8qO2j",mailAttachments__container:"MailAttachments_mailAttachments__container__6l071",mailAttachments__form:"MailAttachments_mailAttachments__form__L_4yq",mailAttachments__form__submit:"MailAttachments_mailAttachments__form__submit__wWpH7"}},5969:function(e){e.exports={paginatedTimeline:"PaginatedTimeline_paginatedTimeline__Ykov7",paginatedTimeline__content:"PaginatedTimeline_paginatedTimeline__content__Vd1IN",paginatedTimeline__content__wrapper:"PaginatedTimeline_paginatedTimeline__content__wrapper__BoC2B",timelineItem__splitView:"PaginatedTimeline_timelineItem__splitView__oVyH1",paginatedTimeline__content__item:"PaginatedTimeline_paginatedTimeline__content__item__TvOk7",paginatedTimeline__content__item__content:"PaginatedTimeline_paginatedTimeline__content__item__content__8L4BS",paginatedTimelineItem:"PaginatedTimeline_paginatedTimelineItem__SmFtz",paginatedTimelineItem__content__item__imageWrapper:"PaginatedTimeline_paginatedTimelineItem__content__item__imageWrapper__t6I8r","-active":"PaginatedTimeline_-active__S8gHf",paginatedTimeline__content__line:"PaginatedTimeline_paginatedTimeline__content__line__7dACg",paginatedTimeline__content__item__title:"PaginatedTimeline_paginatedTimeline__content__item__title__UbUe_",blowUpTitle:"PaginatedTimeline_blowUpTitle__Gjjk0",blowDownTitle:"PaginatedTimeline_blowDownTitle__qDUm2",paginatedTimelineItem__content__item__image:"PaginatedTimeline_paginatedTimelineItem__content__item__image__dXMPM",paginatedTimelineItem__content__currentLine:"PaginatedTimeline_paginatedTimelineItem__content__currentLine__d_eUL",arrowOut:"PaginatedTimeline_arrowOut__0uZ3_",arrowIn:"PaginatedTimeline_arrowIn__FXrbp",arrowCurcleOut:"PaginatedTimeline_arrowCurcleOut___ugok",arrowCurcleIn:"PaginatedTimeline_arrowCurcleIn__ZOE2C",paginatedTimelineItem__content__item__title:"PaginatedTimeline_paginatedTimelineItem__content__item__title__sKLkz",paginatedTimeline__content__triangle:"PaginatedTimeline_paginatedTimeline__content__triangle__Duj8d",paginatedTimelineItem__content__item__headline:"PaginatedTimeline_paginatedTimelineItem__content__item__headline__3Z_ht",paginatedTimelineItem__content__item__text:"PaginatedTimeline_paginatedTimelineItem__content__item__text__EtIxO"}},481:function(e){e.exports={reportForm:"ReportForm_reportForm__E6v7M",reportForm__error:"ReportForm_reportForm__error__HihfJ",reportForm__error__close:"ReportForm_reportForm__error__close__wz9ma",reportForm__error__close__bottom:"ReportForm_reportForm__error__close__bottom__q7KOI",reportForm__error__close__top:"ReportForm_reportForm__error__close__top__HcP6W",reportForm__upper:"ReportForm_reportForm__upper__3Qy_r",reportForm__upper__inner:"ReportForm_reportForm__upper__inner__ytd34",reportForm__upload__list:"ReportForm_reportForm__upload__list__h8cfW",reportForm__upload__remove:"ReportForm_reportForm__upload__remove__V2O_4",reportForm__submit__wrapper:"ReportForm_reportForm__submit__wrapper__t3val",reportForm__submit__spinner:"ReportForm_reportForm__submit__spinner__ub4e_",reportForm__form:"ReportForm_reportForm__form____isc","-successfull":"ReportForm_-successfull__R_zVi","display-none-transition":"ReportForm_display-none-transition__sQbKf",reportForm__thankyou:"ReportForm_reportForm__thankyou__vIwV2","-thankyou":"ReportForm_-thankyou__m3IW0","opacity-zero-to-hundred":"ReportForm_opacity-zero-to-hundred__d6CBh",reportForm__upper__inner__left:"ReportForm_reportForm__upper__inner__left__BIiZF",reportForm__upper__inner__emailWrapper:"ReportForm_reportForm__upper__inner__emailWrapper___h_io"}}}]);